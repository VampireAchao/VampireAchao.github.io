<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="icon" href="/imgs/favicon.ico" type="image/x-icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="author" content="阿超">
  
  <meta name="description" content="​ 我的名字叫阿超 年龄24岁 家在北京市 未婚 职业是软件开发 每天最晚也会在八点前回家 不抽烟 酒浅尝辄止 晚上十二点上床 保证睡足八个小时 睡前写一篇博客 再做二十分钟俯卧撑暖身 然后再睡觉 基本能熟睡到天亮 像婴儿一样不留下任何疲劳和压力 就这样迎来第二天的早晨 健康检查结果也显示我很正常 我想说明我是一个不论何时都追求内心平稳的人 不拘泥于胜负 不纠结于烦恼 不树立使我夜不能寐的敌人 这就是我在这社会的生活态度">
  
  
  
  
  
  
  <title>apache-streamparkpr和代码规范指南 | 阿超</title>
  <link href="https://VampireAchao.gitee.io" rel="prefetch" />

  
<link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/aos.css">
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/jquery.min.js"></script>

  
<script src="/js/bootstrap.min.js"></script>

  
<script src="/js/aos.js"></script>

  
<script src="/js/highslide/highslide-full.min.js"></script>

  
<link rel="stylesheet" href="/js/highslide/highslide.css">

  <style type="text/css">
    @media (max-width: 768px) {
      body {
        background-color: #f0f0f0;
        background: url('/imgs/xsbg.jpg');
        background-attachment: fixed;
      }
      .live2d-widget-container{
        zoom: 0.5;
      }
      .live2d-achao{
        width: 150px !important;
      }
    }
  </style>
  
  <!--<script type="text/javascript">
      if (document.images) {
        var avatar = new Image();
        avatar.src = '/imgs/head.png'
        var previews = 't01d54a78939622a708.jpg,t01b5b4a7529cad373b.jpg,t01260c377a60ef55b8.jpg,t01b32959885c781013.jpg,t01c37e049c18d00e4c.jpg,t01e75d2d4734b2c35e.jpg,t013698845e810692d8.jpg,t012ec64f1e1eb1d23f.jpg,t012db749fb526b27cf.jpg,t01a2e705e6e2514c91.jpg,t0106a9c2522bdd29f7.jpg,t0192efea6a01252f4e.jpg,t01794a9e0bc4321c3c.jpg,t01d2ed30550310750e.jpg,t01a98dd6f6ea17e633.jpg,t0198fd348e2ec8b737.jpg,t0177a850faae7b42f4.jpg,t0106a5ab61a284dcb0.jpg,t01e87ea37c4903393c.jpg,t01fbcc933afdb7affd.jpg,t017299242a9d351de9.jpg,t01fd0d30d46b598a1d.jpg,t019ddfb8b5b89b8475.jpg,t019622fab8982a72ec.jpg,t01bb96bd256aaad950.jpg,t01ba97d26345750c04.jpg,t01bf50d8d5d76238c6.jpg,t01cb6096bf8cb0a285.jpg,t01c4e6c901e3efda72.jpg,t01b58ac4d441d1b546.jpg,t01f3c58eaac22c8544.jpg,t01a58e209bfdbf852b.jpg,t016ff89e6fa6041712.jpg,t0195d14f593431562a.jpg,t01c6d95214927e61c0.jpg,t019c86a25782a7044d.jpg,t014a0ca534d64adbba.jpg,t01b24e85dc07d47b0d.jpg,de1934eb4ac9abdb5e8391c829f94671.jpg'.split(',')
        var previewsPreLoad = []
        for(var i = 0; i < length; i++) {
          previewsPreLoad.push(new Image())
          previewsPreLoad[previewsPreLoad.length - 1].src = '/imgs/preview' + previews[i]
        }
      }
    </script>-->
  <script type="text/javascript">
    // 使用message对象封装消息
    var message = {
      time: 0,
      title: document.title,
      timer: null,
      // 显示新消息提示
      show: function () {
        var title = message.title.replace("【　　　】", "").replace("【新消息】", "");
        // 定时器，设置消息切换频率闪烁效果就此产生
        message.timer = setTimeout(function () {
          message.time++;
          message.show();
          if (message.time % 2 == 0) {
            document.title = "【新消息】" + title
          } else {
            document.title = "【　　　】" + title
          };
        }, 600);
        return [message.timer, message.title];
      },
      // 取消新消息提示
      clear: function () {
        clearTimeout(message.timer);
        document.title = message.title;
      }
    };
    var hiddenProperty = 'hidden' in document ? 'hidden' :
      'webkitHidden' in document ? 'webkitHidden' :
        'mozHidden' in document ? 'mozHidden' : null;
    var title = document.querySelector('title');
    var visibilityChangeEvent = hiddenProperty.replace(/hidden/i, 'visibilitychange');
    var onVisibilityChange = function () {
      if (!document[hiddenProperty]) {
        message.clear()
      } else {
        message.show()
      }
    }
    document.addEventListener(visibilityChangeEvent, onVisibilityChange);


    //随机字
    $(function () {
      var a_idx = 0,
        b_idx = 0;
      c_idx = 0;
      jQuery(document).ready(function ($) {
        $("body").click(function (e) {
          var a = new Array("Daphne", "Ficus", "Iris", "Maackia", "Lythrum", "Myrica", "Sabia", "Flos", "あなたのことが好きです", "嬉しい", "頑張って！", "大丈夫です"),
            b = new Array("#09ebfc", "#ff6651", "#ffb351", "#51ff65", "#5197ff", "#a551ff", "#ff51f7", "#ff518e", "#ff5163", "#efff51"),
            c = new Array("12", "14", "16", "18", "20", "22", "24", "26", "28", "30");
          var $i = $("<span/>").text(a[a_idx]);
          a_idx = (a_idx + 1) % a.length;
          b_idx = (b_idx + 1) % b.length;
          c_idx = (c_idx + 1) % c.length;
          var x = e.pageX,
            y = e.pageY;
          $i.css({
            "z-index": 999,
            "top": y - 20,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "font-size": c[c_idx] + "px",
            "cursor": "url(/imgs/mouse1.cur),url(/imgs/mouse1.cur),auto",
            "color": b[b_idx]
          });
          $("body").append($i);
          $i.animate({
            "top": y - 180,
            "opacity": 0
          }, 1500, function () {
            $i.remove();
          });
        });
      });
      var _hmt = _hmt || [];
    })
  </script>
  <!-- 引用看板娘交互所需的样式表 -->
  <link href='https://VampireAchao.github.io/Pio/static/pio.css' rel='stylesheet' type='text/css'/>
  <!-- 引用 Live2D 核心组件 -->
  <script src='https://VampireAchao.github.io/Pio/static/l2d.js'></script>
  <!-- 引用看板娘交互组件 -->
  <script src='https://VampireAchao.github.io/Pio/static/pio.js'></script>
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
    <!-- 背景轮播图功能 -->
    <section class="hidden-xs">
    <ul class="cb-slideshow">
        <li><span>阿巴</span></li>
        <li><span>阿巴</span></li>
        <li><span>阿巴</span></li>
        <li><span>阿巴</span></li>
        <li><span>阿巴</span></li>
        <li><span>阿巴</span></li>
    </ul>
</section>
    <!-- 欧尼酱功能, 谁用谁知道 -->
    
    <header class="navbar navbar-inverse" id="gal-header">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".bs-navbar-collapse"
                    aria-expanded="false">
                <span class="fa fa-lg fa-reorder"></span>
            </button>
            <a href="https://VampireAchao.gitee.io">
                
                    <style>
                        #gal-header .navbar-brand {
                            height: 54px;
                            line-height: 24px;
                            font-size: 28px;
                            opacity: 1;
                            background-color: rgba(0, 0, 0, 0);
                            text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #228DFF, 0 0 35px #228DFF, 0 0 40px #228DFF, 0 0 50px #228DFF, 0 0 75px #228DFF;
                        }
                    </style>
                    <!-- 这里使用文字(navbar_text or config.title) -->
                    <div class="navbar-brand">阿超</div>
                
            </a>
        </div>
        <div class="collapse navbar-collapse bs-navbar-collapse">
            <ul class="nav navbar-nav" id="menu-gal">
                
                    
                        <li class="">
                            <a href="/">
                                <i class="fa fa-home"></i>首页
                            </a>
                        </li>
                    
                
                    
                        <li class="">
                            <a href="/archives">
                                <i class="fa fa-archive"></i>文章
                            </a>
                        </li>
                    
                
                    
                        
                            <li class="">
                                <a href="/categories">
                                    <i class="fa fa-list"></i>分类
                                </a>
                            </li>
                        
                    
                
                    
                        
                            <li class="dropdown">
                                <!-- TODO 添加hover dropdown效果 -->
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                                   aria-haspopup="true" aria-expanded="false" data-hover="dropdown">
                                    <i class="fa fa-tags"></i>标签
                                </a>
                                <ul class="dropdown-menu">
                                    
                                        
                                            <li>
                                                <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E6%8F%92%E4%BB%B6/">软件及插件</a>
                                            </li>
                                        
                                            <li>
                                                <a href="/tags/java/">java</a>
                                            </li>
                                        
                                            <li>
                                                <a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/">小技巧</a>
                                            </li>
                                        
                                        
                                            <li>
                                                <a href="/tags">...</a>
                                            </li>
                                        
                                    
                                </ul>
                            </li>
                        
                    
                
                    
                        <li class="">
                            <a href="/2020/06/02/%E6%88%91%E7%9A%84%E5%9B%9E%E5%BF%86/">
                                <i class="fa fa-user"></i>关于我
                            </a>
                        </li>
                    
                
				<li>
				    <a href="javascript:themeDbChange();">开关主题</a>
				</li>
            </ul>
        </div>
    </div>

    <div class="pio-container right">
        <div class="pio-action"></div>
        <canvas id="pio" width="180" height="280"></canvas>
    </div>
    <!-- Live2DCubismCore script -->
    <script src="https://VampireAchao.github.io/js/live2dcubismcore.js"></script>
    <!-- Build script -->
    <script src="https://VampireAchao.github.io/js/bundle.js"></script>
    <canvas id="live2d" width="300" height="300" class="live2d live2d-achao"
            style="position: fixed; opacity: 1; left: -45px;bottom: 0; z-index: 99999; pointer-events: none;"></canvas>
    <script>
        var pio = new Paul_Pio({
            "mode": "fixed",
            "hidden": false,
            "content": {
                "welcome": ["欢迎来到阿超的博客~", "欧尼酱！"],
                "touch": ["今天也是元气满满的一天！", "欧尼酱！", "哈哈哈哈，不要戳了"],
                "skin": ["想看看我的新服装吗？", "新衣服真漂亮~"],
                "home": "点击这里回到首页！",
                "link": "https://VampireAchao.github.io/2020/06/02/%E6%88%91%E7%9A%84%E5%9B%9E%E5%BF%86/",
                "close": "QWQ 有缘再会吧~",
                // "referer": "你通过 %t 来到了这里",
                "custom": [
                    {
                        "selector": ".comment-form",
                        "text": ["欢迎参与本文评论，别发小广告噢~", "快来参加本文的评论吧~"]
                    }
                ]
            },
            "model": ["https://VampireAchao.github.io/Pio/models/umaru/model.json"]
        });
        var resourcesPath = '/'; // 指定资源文件（模型）保存的路径
        var backImageName = ''; // 指定背景图片
        var modelDir = ['supa']; // 指定需要加载的模型
        initDefine(resourcesPath, backImageName, modelDir); // 初始化模型
        // window.localStorage.clear();    // 清理localStorage
    </script>
	<script>
	function themeDbChange(){
		let hideTheme = localStorage.getItem("hideTheme")
		if(hideTheme != 'hideTheme'){

			localStorage.setItem("hideTheme","hideTheme")
		}else{
			localStorage.setItem("hideTheme","disHideTheme")

		}
		themeChange()
	}

	function themeChange(){
		let themeClass = [".cb-slideshow",".alert-gal",".pio-container",".live2d-widget-container",".live2d-achao"]
		let themes = themeClass.map(c=>$(c))

		let hideTheme = localStorage.getItem("hideTheme")
		console.log({hideTheme})
		if(hideTheme == 'hideTheme'){

			themes.forEach(t=>t.hide())
			$("head").children("link[href='/css/style.css']").attr('disabled', 'disabled')
		}else{
			themes.forEach(t=>t.show())
			$("head").children("link[href='/css/style.css']").removeAttr('disabled')
		}
	}
	$(themeChange)
	</script>
</header>

    <div id="gal-body">
        <div class="container">
            <div class="row">
                <div class="col-md-8 gal-right" id="mainstay">
                    
<article class="article well article-body" id="article">
    <div class="breadcrumb">
        <i class="fa fa-home"></i>
        <a href="https://VampireAchao.gitee.io">阿超</a>
        >
        <span>apache-streamparkpr和代码规范指南</span>
    </div>
    <!-- 大型设备详细文章 -->
    <div class="hidden-xs">
        <div class="title-article">
            <h1>
                <a href="/2023/09/01/apache-streamparkpr%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E6%8C%87%E5%8D%97/">apache-streamparkpr和代码规范指南</a>
            </h1>
        </div>
        <div class="tag-article">
            
            <span class="label label-gal">
                <i class="fa fa-tags"></i>
                
                <a href="/tags/java/">java</a>
                
            </span>
            
            <span class="label label-gal">
                <i class="fa fa-calendar"></i> 2023-09-01
            </span>
            
        </div>
    </div>
    <!-- 小型设备详细文章 -->
    <div class="visible-xs">
        <center>
            <div class="title-article">
                <h4>
                    <a href="/2023/09/01/apache-streamparkpr%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E6%8C%87%E5%8D%97/">apache-streamparkpr和代码规范指南</a>
                </h4>
            </div>
            <p>
                <i class="fa fa-calendar"></i> 2023-09-01
            </p>
            <p>
                
                <i class="fa fa-tags"></i>
                
                <a href="/tags/java/">java</a>
                
                
                
            </p>
        </center>
    </div>
    <div class="content-article">
        <blockquote>
<p>世界上本来就有许多格格不入的事物为了共存而不得不相互接受。——博尔赫斯《沙之书》</p>
</blockquote>
<p>最近在为<code>streampark</code>起草代码规范指南，对应的<code>pr</code>如下</p>
<p><a target="_blank" rel="noopener" href="https://github.com/apache/incubator-streampark-website/pull/226">https://github.com/apache/incubator-streampark-website/pull/226</a></p>
<p>对应的内容：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">    Licensed to the Apache Software Foundation (ASF) under one or more</span><br><span class="hljs-comment">    contributor license agreements.  See the NOTICE file distributed with</span><br><span class="hljs-comment">    this work for additional information regarding copyright ownership.</span><br><span class="hljs-comment">    The ASF licenses this file to You under the Apache License, Version 2.0</span><br><span class="hljs-comment">    (the &quot;License&quot;); you may not use this file except in compliance with</span><br><span class="hljs-comment">    the License.  You may obtain a copy of the License at</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">       https://www.apache.org/licenses/LICENSE-2.0</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">    Unless required by applicable law or agreed to in writing, software</span><br><span class="hljs-comment">    distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span><br><span class="hljs-comment">    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span><br><span class="hljs-comment">    See the License for the specific language governing permissions and</span><br><span class="hljs-comment">    limitations under the License.</span><br><span class="hljs-comment">--&gt;</span><br></code></pre></td></tr></table></figure>
<h2 id="1-pull-requests-changes-rule"><a class="markdownIt-Anchor" href="#1-pull-requests-changes-rule"></a> 1 Pull Requests &amp; Changes Rule</h2>
<ol>
<li>
<p><code>ISSUE</code>/<code>PR</code>(pull request) driving and naming</p>
<ul>
<li>
<p>Ensure that <code>PR</code> corresponds to <code>ISSUE</code>.</p>
<blockquote>
<p><strong>Note</strong>: <code>Hotfix</code> issue does not need to follow this rule, such as fixing spelling errors in <code>JavaDoc</code> or <code>document</code> files.</p>
</blockquote>
</li>
<li>
<p>Title naming format<br />
When naming <code>PR</code>, you can refer to the <code>[ISSUE-XXXX][Feature/Improve/Refactor/Bug/Cleanup] Title</code> of the pull request,<br />
where <code>ISSUE-XXXX</code> should be replaced with the actual <code>ISSUE</code> number.</p>
<ul>
<li>The second part describes the type of <code>PR</code>, such as new features, improvement, refactor, etc.</li>
<li>If all changes to <code>PR</code> are within a certain module or component, they can be indicated in the commit message.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Description</p>
<ul>
<li>Please fill in the <code>PR</code> template to describe the contribution. So that the reviewer can understand the problem and solution from the description, rather than just from the code.</li>
<li>Ensure that the description is sufficient to illustrate the problem addressed by the <code>PR</code>.</li>
<li>Small changes do not require too much description.</li>
<li>In an ideal scenario, the problem is described in <code>ISSUE</code>, and most of the description is copied from there.</li>
</ul>
</li>
<li>
<p>Try to break down changes into pure types of changes</p>
<ul>
<li>It’s recommended that <code>PR</code> should be arranged changes such as <code>Cleanup</code>, <code>Refactor</code>, <code>Improve</code>, and <code>Feature</code> into separated <code>PRs</code>/<code>Commits</code>.</li>
<li>In this way, the reviewers can independently view cleaning and refactoring, and ensure that these changes do not change behavior.</li>
<li>Then, the reviewer can independently review the core changes and ensure that they are a clean and robust change.</li>
<li>In extreme cases, if a rollback commit is required, it can provide the optimal granularity for version rollback selection.</li>
<li>In addition, significant contributions should be split into a set of independent changes that can be reviewed independently.</li>
</ul>
</li>
<li>
<p>Commit message<br />
The commit of messages should follow a pattern similar to the <code>PR</code>: <code>[ISSUE-XXXX][Feature/Improve/Refactor/Cleanup] Title of the pull request</code>.</p>
<ul>
<li><code>[ISSUE-xxxx1][Improve(ment)] Improve ...</code></li>
<li><code>[ISSUE-xxxx2][Refactor] Refactor ...</code></li>
<li><code>[ISSUE-xxxx3][Feature] Support ...</code></li>
<li><code>[ISSUE-xxxx4][Bug] Fix  ...</code></li>
<li><code>[ISSUE-xxxx5][Feature][subtask] Support ...</code></li>
<li><code>[Hotfix][module_name] Fix xxx comments ...</code></li>
</ul>
</li>
</ol>
<blockquote>
<p><strong>Note</strong>: Try to use git history instead of annotated code (not mandatory)</p>
</blockquote>
<h2 id="2-code-checkstyle"><a class="markdownIt-Anchor" href="#2-code-checkstyle"></a> 2 Code Checkstyle</h2>
<ul>
<li>
<p>Backend code formatting Maven plugin: <code>spotless</code><br />
Just run <code>mvn spotless:apply</code> in the project repo root directory after installing the plugin.</p>
</li>
<li>
<p>Backend code specification Maven plugin: <code>checkstyle</code><br />
Just run <code>mvn checkstyle:checkstyle</code> after installing the plugin.</p>
</li>
<li>
<p>Frontend code formatting plugin <code>eslint</code></p>
<ul>
<li>The original command is <code>npx eslint --cache --max-warnings 0 &quot;&#123;src,mock&#125;/**/*.&#123;vue,ts,tsx&#125;&quot; --fix</code></li>
<li>Encapsulated as <code>npm run lint:eslint</code></li>
</ul>
</li>
</ul>
<h2 id="3-programming-specification"><a class="markdownIt-Anchor" href="#3-programming-specification"></a> 3 Programming Specification</h2>
<h3 id="31-naming-style"><a class="markdownIt-Anchor" href="#31-naming-style"></a> 3.1 Naming Style</h3>
<ol>
<li>
<p>Prioritize selecting nouns for variable naming, it’s easier to distinguish between <code>variables</code> or <code>methods</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">Cache&lt;String&gt; publicKeyCache;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Pinyin abbreviations are prohibited for variables (excluding nouns such as place names), such as chengdu.</p>
</li>
<li>
<p>It is recommended to end variable names with a <code>type</code>.<br />
For variables of type <code>Collection/List</code>, take <code>xxxx</code> (plural representing multiple elements) or end with <code>xxxList</code> (specific type).<br />
For variables of type <code>map</code>, describe the <code>key</code> and <code>value</code> clearly:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">Map&lt;Long, User&gt; idUserMap;<br>Map&lt;Long, String&gt; userIdNameMap;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>That can intuitively know the type and meaning of the variable through its name.<br />
Method names should start with a verb first as follows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">computeVcores</span><span class="hljs-params">(Object parameter1)</span>;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>The methods name of basic <code>CRUD</code> of the database layer (non-service layer) should be uniformly standardized according to name <code>com.baomidou.mybatisplus.core.mapper.BaseMapper</code>:</p>
<p>If perform a database select operation, the name of the method should be started with <code>select</code>.</p>
<p>For example, <code>selectById</code>, <code>selectByXxx</code>, <code>selectPageByXxx</code></p>
<ul>
<li>If perform a database <mark> update </mark> statement operation, the name of the method should be started with <code>update</code></li>
<li>If perform a database <mark> insert </mark> statement operation, the name of the method should be started with <code>insert</code></li>
<li>If perform a database <mark> delete </mark> statement operation, the name of the method should be started with <code>delete</code></li>
</ul>
</li>
<li>
<p>The methods name of basic <code>CRUD</code> of the service layer should be named as <code>com.baomidou.mybatisplus.extension.service.IService</code>:</p>
<ul>
<li>If perform a database <mark> select </mark> operation to query multiple records, the name of the method should be started with a <code>list</code>, such as <code>listByIds</code>, <code>listByXxx</code></li>
<li>If perform a database <mark> select </mark> operation to query a single record, the name of the method should be started with get, such as <code>getByName</code> and <code>getOne</code></li>
<li>If perform a database <mark> update </mark> operation, the name of the method should be started with <code>update</code></li>
<li>If perform a database <mark> insert </mark> operation, the name of the method should be started with <code>save</code></li>
<li>If perform a database <mark> delete </mark> operation, the name of the method should be started with <code>remove</code></li>
</ul>
</li>
</ol>
<h3 id="32-constant-variables-definition"><a class="markdownIt-Anchor" href="#32-constant-variables-definition"></a> 3.2 Constant Variables Definition</h3>
<ol>
<li>
<p>Set the <code>serialVersionUID</code> of all classes to <code>1L</code>, following <code>Flink</code>’s <code>serialVersionUID</code>.</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> -<span class="hljs-number">8713837118340960775L</span>;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Redundant strings should be extracted as constants</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RestResponse <span class="hljs-title function_">success</span><span class="hljs-params">(Object data)</span> &#123;<br>    <span class="hljs-type">RestResponse</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestResponse</span>();<br>    resp.put(<span class="hljs-string">&quot;status&quot;</span>, <span class="hljs-string">&quot;success&quot;</span>);<br>    resp.put(<span class="hljs-string">&quot;code&quot;</span>, ResponseCode.CODE_SUCCESS);<br>    resp.put(<span class="hljs-string">&quot;data&quot;</span>, data);<br>    <span class="hljs-keyword">return</span> resp;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RestResponse <span class="hljs-title function_">error</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">RestResponse</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestResponse</span>();<br>    resp.put(<span class="hljs-string">&quot;status&quot;</span>, <span class="hljs-string">&quot;error&quot;</span>);<br>    resp.put(<span class="hljs-string">&quot;code&quot;</span>, ResponseCode.CODE_FAIL);<br>    resp.put(<span class="hljs-string">&quot;data&quot;</span>, <span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">return</span> resp;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<blockquote>
<p>Strings are extracted as constant references.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STATUS_SUCCESS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;success&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STATUS_FAIL</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;error&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">STATUS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;status&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CODE</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;code&quot;</span>;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DATA</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;data&quot;</span>;<br>     <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RestResponse <span class="hljs-title function_">success</span><span class="hljs-params">(Object data)</span> &#123;<br>    <span class="hljs-type">RestResponse</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestResponse</span>();<br>    resp.put(STATUS, STATUS_SUCCESS);<br>    resp.put(CODE, ResponseCode.CODE_SUCCESS);<br>    resp.put(DATA, data);<br>    <span class="hljs-keyword">return</span> resp;<br>&#125;<br>     <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RestResponse <span class="hljs-title function_">error</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">RestResponse</span> <span class="hljs-variable">resp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RestResponse</span>();<br>    resp.put(STATUS, STATUS_FAIL);<br>    resp.put(CODE, ResponseCode.CODE_FAIL);<br>    resp.put(DATA, <span class="hljs-literal">null</span>);<br>    <span class="hljs-keyword">return</span> resp;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Variables that have not been reassigned must also be declared as <mark> final </mark> types.</p>
</li>
</ol>
<h3 id="33-methods-rule"><a class="markdownIt-Anchor" href="#33-methods-rule"></a> 3.3 Methods Rule</h3>
<ol>
<li>
<p>Sort the methods in the class in the order of <code>public</code>, <code>protected</code>, and <code>private</code></p>
</li>
<li>
<p>When there are restrictions on the method, the parameters and returned values of the method need to be annotated with <code>@Nonnull</code> or <code>@Nullable</code> annotations and constraints.</p>
<p>For example, if the parameter cannot be null, it is best to add a <code>@Nonnull</code> annotation. If the returned value can be null, the <code>@Nullable</code> annotation should be added first.</p>
<p><mark> Note: that the package name is <code>javax.validation.requirements </code> </mark></p>
</li>
<li>
<p>If there are too many lines of code in the method, please have a try on using multiple sub methods at appropriate points to segment the method body.</p>
<p>Generally speaking, it needs to adhere to the following principles:</p>
<ul>
<li>Convenient testing</li>
<li>Good semantics</li>
<li>Easy to read</li>
</ul>
<p>In addition, it is also necessary to consider whether the splitting is reasonable in terms of components, logic, abstraction, and other aspects in the scenario.</p>
<blockquote>
<p>However, there is currently no clear definition of demo. During the evolution process, we will provide additional examples for developers to have a clearer reference and understanding.</p>
</blockquote>
</li>
</ol>
<h3 id="34-collection-rule"><a class="markdownIt-Anchor" href="#34-collection-rule"></a> 3.4 Collection Rule</h3>
<ol>
<li>
<p>For <code>collection</code> returned values, unless there are special <code>concurrent</code> (such as thread safety), always return the <code>interface</code>, such as:</p>
<ul>
<li>returns <mark> List </mark> if use <code>ArrayList</code></li>
<li>returns <mark> Map </mark> if use <code>HashMap</code></li>
<li>returns <mark> Set </mark> if use <code>HashSet</code></li>
</ul>
</li>
<li>
<p>If there are multiple threads, the following declaration or returned types can be used:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> CurrentHashMap map;<br><span class="hljs-keyword">public</span> CurrentHashMap <span class="hljs-title function_">funName</span><span class="hljs-params">()</span>;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="35-concurrent-processing"><a class="markdownIt-Anchor" href="#35-concurrent-processing"></a> 3.5 Concurrent Processing</h3>
<ol>
<li>
<p>The <code>thread pool</code> needs to be managed, using a unified entry point to obtain the <code>thread pool</code>.</p>
<p><mark> Note: During the evolution process, we will provide additional examples for developers to have a clearer reference and understanding. </mark></p>
</li>
<li>
<p><code>Thread pool</code> needs to be resource constrained to prevent resource leakage caused by improper handling</p>
</li>
</ol>
<h3 id="36-controlcondition-statements"><a class="markdownIt-Anchor" href="#36-controlcondition-statements"></a> 3.6 Control/Condition Statements</h3>
<ol>
<li>
<p>Avoid unreasonable <code>condition/control</code> branches order leads to:</p>
<ul>
<li>Multiple code line <code>depths</code> of <code>n+1</code></li>
<li>Redundant lines</li>
</ul>
</li>
</ol>
<p>Generally speaking, if a method’s code line depth exceeds <code>2+ Tabs</code> due to continuous nested <code>if... else..</code>, it should be considered to try</p>
<ul>
<li><code>merging branches</code>,</li>
<li><code>inverting branch conditions</code></li>
<li><code>extracting private methods</code></li>
</ul>
<p>to reduce code line depth and improve readability like follows:</p>
<ul>
<li>
<p>Union or merge the logic into the next level calling</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (isInsert) &#123;<br>  save(platform);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>   updateById(platform);<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">saveOrUpdate(platform);<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Merge the conditions</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (expression1) &#123;<br>  <span class="hljs-keyword">if</span>(expression2) &#123;<br>      ......<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<ul>
<li>
<p>Positive demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (expression1 &amp;&amp; expression2) &#123;<br>......<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Reverse the condition</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomething</span><span class="hljs-params">()</span> &#123;<br> <span class="hljs-comment">// Ignored more deeper block lines</span><br> <span class="hljs-comment">// .....</span><br> <span class="hljs-keyword">if</span> (condition1) &#123;<br>    ...<br> &#125; <span class="hljs-keyword">else</span> &#123;<br>    ...<br> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomething</span><span class="hljs-params">()</span> &#123;<br> <span class="hljs-comment">// Ignored more deeper block lines</span><br> <span class="hljs-comment">// .....</span><br> <span class="hljs-keyword">if</span> (!condition1) &#123;<br>    ...<br>    <span class="hljs-keyword">return</span>;<br> &#125;<br> <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Using a single variable or method to reduce the complex conditional expression</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (dbType.indexOf(<span class="hljs-string">&quot;sqlserver&quot;</span>) &gt;= <span class="hljs-number">0</span> || dbType.indexOf(<span class="hljs-string">&quot;sql server&quot;</span>) &gt;= <span class="hljs-number">0</span>) &#123;<br> ...<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (containsSqlServer(dbType)) &#123;<br>  ....<br>&#125;<br><span class="hljs-comment">//.....</span><br><span class="hljs-comment">// definition of the containsSqlServer</span><br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>Using <code>sonarlint</code> and <code>better highlights</code> to check code depth looks like good in the future.</p>
</blockquote>
<h3 id="37-code-comments-rule"><a class="markdownIt-Anchor" href="#37-code-comments-rule"></a> 3.7 Code Comments Rule</h3>
<ol>
<li>
<p>Method lacks comments:</p>
<ul>
<li><code>When</code>: When can the method be called</li>
<li><code>How</code>: How to use this method and how to pass parameters, etc.</li>
<li><code>What</code>: What functions does this method achieve</li>
<li><code>Note</code>: What should developers pay attention to when calling this method</li>
</ul>
</li>
<li>
<p>Missing necessary class header description comments.</p>
<p>Add <code>What</code>, <code>Note</code>, etc. like mentioned in the <code>1</code>.</p>
</li>
<li>
<p>The method declaration in the interface must be annotated.</p>
<ul>
<li>
<p>If the semantics of the implementation and the annotation content at the interface declaration are inconsistent, the specific implementation method also needs to be rewritten with annotations.</p>
</li>
<li>
<p>If the semantics of the method implementation are consistent with the annotation content at the interface declaration, it is not recommended to write annotations to avoid duplicate annotations.</p>
</li>
</ul>
</li>
</ol>
<h3 id="38-java-lambdas"><a class="markdownIt-Anchor" href="#38-java-lambdas"></a> 3.8 Java Lambdas</h3>
<ol>
<li>
<p>Prefer <code>non-capturing</code> lambdas (lambdas that do not contain references to the outer scope).<br />
Capturing lambdas need to create a new object instance for every call. <code>Non-capturing</code> lambdas can use the same instance for each invocation.</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">map.computeIfAbsent(key, x -&gt; key.toLowerCase())<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">map.computeIfAbsent(key, k -&gt; k.toLowerCase());<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Consider method references instead of inline lambdas</p>
<ul>
<li>
<p>Negative demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">map.computeIfAbsent(key, k-&gt; Loader.load(k));<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">map.computeIfAbsent(key, Loader::load);<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h3 id="39-java-streams"><a class="markdownIt-Anchor" href="#39-java-streams"></a> 3.9 Java Streams</h3>
<ul>
<li>
<p>Avoid Java Streams in any performance critical code.</p>
</li>
<li>
<p>The main motivation to use Java Streams would be to improve code readability. As such, they can be a good match in parts of the code that are not data-intensive, but deal with coordination.</p>
</li>
<li>
<p>Even in the latter case, try to limit the scope to a method, or a few private methods within an internal class.</p>
</li>
</ul>
<h3 id="310-pre-conditions-checking"><a class="markdownIt-Anchor" href="#310-pre-conditions-checking"></a> 3.10 Pre-Conditions Checking</h3>
<ol>
<li>Use a unified <code>Utils.requireXXX</code> to complete the validation of the prerequisite, and if possible, replace the <code>AlertXXException.throwIfXXX</code> by new pre-conditions checking.</li>
</ol>
<h2 id="4-exception-processing"><a class="markdownIt-Anchor" href="#4-exception-processing"></a> 4 Exception Processing</h2>
<p>This <code>streampark-console-service</code> module is the core module for processing user requests.<br />
It’s very necessary to strive to provide the best user experience.<br />
So, we introduced the <a target="_blank" rel="noopener" href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/AbstractApiException.java">AbstractApiException</a><br />
and its subclasses to get more friendly interaction effect. Non-<code>AbstractApiException</code> is treated as internal server errors correspondingly, which needn’t notify the interaction details to users.<br />
Based on the above premise, we need to pay attention to the handling of <code>AbstractApiException</code>.<br />
For example, we should throw an exception by one of followed subclasses of <code>AbstractApiException</code> when processing logic with the user operation errors or missing data errors:</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/ApiDetailException.java">ApiDetailException</a></p>
<blockquote>
<p>An exception message that needs to be notified to front-end, is a detailed exception message, such as the stackTrace info, often accompanied by a large number of exception logs,<br />
e.g: <code>Failed to start job</code>, need to display the exception(stackTrace info) to front-end.</p>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/ApiAlertException.java">ApiAlertException</a></p>
<blockquote>
<p>An exception message that needs to be notified to front-end, usually a simple, clear message, e.g:</p>
<ol>
<li>Username already exists</li>
<li>No permission, please contact the administrator</li>
<li>…</li>
</ol>
</blockquote>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://github.com/apache/incubator-streampark/blob/dev/streampark-console/streampark-console-service/src/main/java/org/apache/streampark/console/base/exception/AlertException.java">AlertException</a></p>
<blockquote>
<p>An exception message that needs to be notified to front-end when processing alert logic.</p>
</blockquote>
</li>
<li>
<p>Or others exceptions used to get fine users interaction.</p>
</li>
</ul>
<p>In addition to handling the classification of exceptions, we’d better make the precise and concise exception message and try to ensure the follows in the exception:</p>
<ul>
<li>Display the current status of the abnormal case.</li>
<li>Display the solutions to the abnormal case.</li>
<li>Or others informations fit the pretty interaction.</li>
</ul>
<p>Please click <a target="_blank" rel="noopener" href="https://github.com/apache/incubator-streampark/issues/2325">Issue-2325</a> for more details about the items if needed.</p>
<h2 id="5-log"><a class="markdownIt-Anchor" href="#5-log"></a> 5 Log</h2>
<ol>
<li>
<p>Use <code>placeholders</code> for log output:</p>
<ul>
<li>
<p>Negative demo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">log.info(<span class="hljs-string">&quot;Deploy cluster request &quot;</span> + deployRequest);<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">log.info(<span class="hljs-string">&quot;load plugin:&#123;&#125; to &#123;&#125;&quot;</span>, file.getName(), appPlugins);<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Pay attention to the selection of <code>log level</code> when printing logs</p>
<p>When printing the log content, if the actual parameters of the log placeholder are passed, it is necessary to avoid premature evaluation to avoid unnecessary evaluation caused by the log level.</p>
<ul>
<li>
<p>Negative demo:</p>
<p>Assuming the current log level is <code>INFO</code>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ignored declaration lines.</span><br>List&lt;User&gt; userList = getUsersByBatch(<span class="hljs-number">1000</span>);<br>LOG.debug(<span class="hljs-string">&quot;All users: &#123;&#125;&quot;</span>, getAllUserIds(userList));<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>Positive demo:</p>
<p>In this case, we should determine the log level in advance before making actual log calls as follows:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// ignored declaration lines.</span><br>List&lt;User&gt; userList = getUsersByBatch(<span class="hljs-number">1000</span>);<br><span class="hljs-keyword">if</span> (LOG.isDebugEnabled()) &#123;<br>  LOG.debug(<span class="hljs-string">&quot;All ids of users: &#123;&#125;&quot;</span>, getAllIDsOfUsers(userList));    <br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h2 id="6-testing"><a class="markdownIt-Anchor" href="#6-testing"></a> 6 Testing</h2>
<ol>
<li>
<p>For some of the <code>code/variables</code> used for <code>testing</code>, you can use <code>@VisableForTesting</code> annotation to indicate that</p>
</li>
<li>
<p>It’s recommended to use <code>JUnit5</code> to develop test case preparation</p>
</li>
<li>
<p>Using <code>AssertJ</code> to develop assertions statements.</p>
</li>
<li>
<p>About the implementation of tests.</p>
<ul>
<li>
<p>If the test case only tests an <code>independent</code> class or method that does not require external components such as hadoop,<br />
remote flink session cluster, etc., it can be written directly using <code>JUnit5</code> &amp; <code>Mockito</code>.</p>
</li>
<li>
<p>If the test case needs a <code>real database</code>, environment or backend environment,<br />
but doesn’t need to interact with external components, it’s recommended to inherit directly from <code>SpringUnitTestBase</code>.</p>
</li>
<li>
<p>If the test case requires <code>a real database, environment</code> or <code>backend environment</code>,<br />
but needs to <code>interact with external components</code> (<code>Remote Flink session cluster</code>, <code>Hadoop cluster</code>),<br />
it’s recommended to write the test case by directly inheriting <code>SpringIntegrationTestBase</code>.</p>
</li>
</ul>
</li>
<li>
<p>It’s only recommended to use integration tests on critical test links to avoid making the <code>CI</code> overhead time too long and the resource load too heavy.</p>
</li>
</ol>
<h2 id="references"><a class="markdownIt-Anchor" href="#references"></a> References</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://site.mockito.org/">https://site.mockito.org/</a></li>
<li><a target="_blank" rel="noopener" href="https://flink.apache.org/zh/how-to-contribute/code-style-and-quality-preamble/">https://flink.apache.org/zh/how-to-contribute/code-style-and-quality-preamble/</a></li>
<li><a target="_blank" rel="noopener" href="https://alibaba.github.io/p3c/">https://alibaba.github.io/p3c/</a></li>
<li><a target="_blank" rel="noopener" href="https://rules.sonarsource.com/java/">https://rules.sonarsource.com/java/</a></li>
<li><a target="_blank" rel="noopener" href="https://joel-costigliola.github.io/assertj/index.html">https://joel-costigliola.github.io/assertj/index.html</a></li>
<li><a target="_blank" rel="noopener" href="https://junit.org/junit5/">https://junit.org/junit5/</a></li>
</ul>

    </div>
</article>


                </div>
                <aside class="col-md-4 gal-left" id="sidebar">
    <!-- 此为sidebar的搜索框, 非搜索结果页面 -->
<aside id="sidebar-search">
    <div class="search" data-aos="fade-up" data-aos-duration="2000">
        <form class="form-inline clearfix" id="search-form" method="get"
              action="/search/index.html">
            <input type="text" name="s" class="form-control" id="searchInput" placeholder="搜索文章~" autocomplete="off">
            <button class="btn btn-danger btn-gal" type="submit">
                <i class="fa fa-search"></i>
            </button>
        </form>
    </div>
</aside>
    <aside id="sidebar-author">
    <div class="panel panel-gal" data-aos="flip-right" data-aos-duration="3000">
        <div class="panel-heading" style="text-align: center">
            <i class="fa fa-quote-left"></i>
            阿超
            <i class="fa fa-quote-right"></i>
        </div>
        <div class="author-panel text-center">
            <div class="author-avatar">
            <img src="/imgs/head.png"
                             alt="个人头像" class="author-image">
            </div>
            <p class="author-description"><p>​ 我的名字叫阿超 年龄24岁 家在北京市 未婚 职业是软件开发 每天最晚也会在八点前回家 不抽烟 酒浅尝辄止 晚上十二点上床 保证睡足八个小时 睡前写一篇博客 再做二十分钟俯卧撑暖身 然后再睡觉 基本能熟睡到天亮 像婴儿一样不留下任何疲劳和压力 就这样迎来第二天的早晨 健康检查结果也显示我很正常 我想说明我是一个不论何时都追求内心平稳的人 不拘泥于胜负 不纠结于烦恼 不树立使我夜不能寐的敌人 这就是我在这社会的生活态度</p>
</p>
        </div>
    </div>
</aside>

    
    <aside id="sidebar-recent_comments">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-comments"></i>
            最新评论
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush"></ul>
    </div>
</aside>
    
    <!-- 要配置好leancloud才能开启此小工具 -->
    
    
    <aside id="sidebar-recent_posts">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            近期文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/12/Handy/">Handy</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/11/PaddleOCR/">PaddleOCR</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/10/Open-AutoGLM/">Open-AutoGLM</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/09/nanoGPT/">nanoGPT</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/08/minimind/">minimind</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/07/open-notebook/">open-notebook</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/06/claude-cookbooks/">claude-cookbooks</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/05/gpui-component/">gpui-component</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/04/strix/">strix</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/12/03/agent-lightning/">agent-lightning</a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="sidebar-rand_posts">
    <div class="panel panel-gal recent" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            随机文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2025/03/27/gitalk/">gitalk</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2023/01/13/idea%E8%B7%B3%E8%BD%ACclass%E6%96%87%E4%BB%B6/">idea跳转class文件</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2023/06/07/image-conversion/">image-conversion</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2021/08/26/join/">join</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2022/04/07/setState%E5%BC%82%E6%AD%A5%E9%97%AE%E9%A2%98/">setState异步问题</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2021/11/16/simple-query/">simple-query</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2023/08/16/vue-demi/">vue-demi</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2021/04/14/%E5%AE%89%E5%8D%93%E8%8E%B7%E5%8F%96%E7%89%88%E6%9C%AC%E5%8F%B7/">安卓获取版本号</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2020/08/08/%E8%BF%81%E7%A7%BBspring%E9%A1%B9%E7%9B%AE%E5%88%B0springboot/">迁移spring项目到springboot</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2022/02/24/%E9%85%8D%E7%BD%AEBabel%E9%AB%98%E4%BA%AE%E6%8F%92%E4%BB%B6/">配置Babel高亮插件</a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="gal-sets">
        <div class="panel panel-gal" data-aos="fade-up" data-aos-duration="2000">
            <ul class="nav nav-pills pills-gal">

                
                <li>
                    <a href="/2023/09/01/apache-streamparkpr%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E6%8C%87%E5%8D%97/index.html#sidebar-tags" data-toggle="tab" id="tags-tab">热门标签</a>
                </li>
                
                
                <li>
                    <a href="/2023/09/01/apache-streamparkpr%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E6%8C%87%E5%8D%97/index.html#sidebar-friend-links" data-toggle="tab" id="friend-links-tab">友情链接</a>
                </li>
                
                
                <li>
                    <a href="/2023/09/01/apache-streamparkpr%E5%92%8C%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83%E6%8C%87%E5%8D%97/index.html#sidebar-links" data-toggle="tab" id="links-tab">个人链接</a>
                </li>
                
            </ul>
            <div class="tab-content">
                
                <div class="cloud-tags tab-pane nav bs-sidenav fade" id="sidebar-tags">
    
    <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%8F%8A%E6%8F%92%E4%BB%B6/" style="font-size: 15.053727026990472px;" class="tag-cloud-link">软件及插件</a>
    
    <a href="/tags/java/" style="font-size: 13.14079952692591px;" class="tag-cloud-link">java</a>
    
    <a href="/tags/%E5%B0%8F%E6%8A%80%E5%B7%A7/" style="font-size: 18.403225205973158px;" class="tag-cloud-link">小技巧</a>
    
    <a href="/tags/ai/" style="font-size: 9.04809090935893px;" class="tag-cloud-link">ai</a>
    
    <a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 8.087355314272717px;" class="tag-cloud-link">前端</a>
    
    <a href="/tags/android/" style="font-size: 15.841117892881737px;" class="tag-cloud-link">android</a>
    
    <a href="/tags/python/" style="font-size: 9.947909677872747px;" class="tag-cloud-link">python</a>
    
    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 16.88982944618642px;" class="tag-cloud-link">数据库</a>
    
    <a href="/tags/%E8%BF%90%E7%BB%B4/" style="font-size: 15.453210893035644px;" class="tag-cloud-link">运维</a>
    
    <a href="/tags/go/" style="font-size: 16.753761187742683px;" class="tag-cloud-link">go</a>
    
    <a href="/tags/ios/" style="font-size: 17.07082589850115px;" class="tag-cloud-link">ios</a>
    
    <a href="/tags/c/" style="font-size: 17.001159760538496px;" class="tag-cloud-link">c++</a>
    
    <a href="/tags/flutter/" style="font-size: 18.83526883258908px;" class="tag-cloud-link">flutter</a>
    
    <a href="/tags/Java/" style="font-size: 8.442046901082389px;" class="tag-cloud-link">Java</a>
    
    <a href="/tags/ruby/" style="font-size: 14.858492114214325px;" class="tag-cloud-link">ruby</a>
    
    <a href="/tags/c/" style="font-size: 11.869477445428334px;" class="tag-cloud-link">c</a>
    
    <a href="/tags/Clojure/" style="font-size: 8.382884671724398px;" class="tag-cloud-link">Clojure</a>
    
    <a href="/tags/bug/" style="font-size: 12.792349677196157px;" class="tag-cloud-link">bug</a>
    
    <a href="/tags/%E5%85%B6%E4%BB%96/" style="font-size: 13.320239719416072px;" class="tag-cloud-link">其他</a>
    
    <a href="/tags/kotlin/" style="font-size: 19.691607375588443px;" class="tag-cloud-link">kotlin</a>
    
    <a href="/tags/lua/" style="font-size: 19.488976223683252px;" class="tag-cloud-link">lua</a>
    
    <a href="/tags/swift/" style="font-size: 12.14179467500141px;" class="tag-cloud-link">swift</a>
    
    <a href="/tags/minecraft/" style="font-size: 15.547218391275603px;" class="tag-cloud-link">minecraft</a>
    
    <a href="/tags/rust/" style="font-size: 18.92350444378298px;" class="tag-cloud-link">rust</a>
    
    <a href="/tags/%E9%83%A8%E7%BD%B2/" style="font-size: 14.14819211024828px;" class="tag-cloud-link">部署</a>
    
    <a href="/tags/flink/" style="font-size: 8.707102387420743px;" class="tag-cloud-link">flink</a>
    
    <a href="/tags/llvm/" style="font-size: 13.68204015331537px;" class="tag-cloud-link">llvm</a>
    
    <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 17.51359758995227px;" class="tag-cloud-link">机器学习</a>
    
    <a href="/tags/php/" style="font-size: 9.930201442526007px;" class="tag-cloud-link">php</a>
    
    <a href="/tags/typescript/" style="font-size: 13.113405548848847px;" class="tag-cloud-link">typescript</a>
    
    <a href="/tags/redis/" style="font-size: 18.07308612878413px;" class="tag-cloud-link">redis</a>
    
    <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 16.836087745329902px;" class="tag-cloud-link">设计模式</a>
    
    <a href="/tags/objective-c/" style="font-size: 19.231940541280256px;" class="tag-cloud-link">objective-c</a>
    
    <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 15.314531052980598px;" class="tag-cloud-link">算法</a>
    
</div>
                
                
                <div class="friend-links tab-pane nav bs-sidenav fade" id="sidebar-friend-links">
    
    <li>
        <a href="https://mofan212.gitee.io/" target="_blank">Mofan</a>
    </li>
    
    <li>
        <a href="http://www.wwang.net" target="_blank">派派河鉴黄师</a>
    </li>
    
    <li>
        <a href="https://shrimp_study.gitee.io/" target="_blank">加油</a>
    </li>
    
    <li>
        <a href="https://howling.gitee.io/" target="_blank">嚎羸</a>
    </li>
    
    <li>
        <a href="https://techyang99.gitee.io/" target="_blank">Techyang</a>
    </li>
    
    <li>
        <a href="https://mujeyf.cn" target="_blank">GeekDream</a>
    </li>
    
    <li>
        <a href="https://amadasy.gitee.io/" target="_blank">Amadasy</a>
    </li>
    
    <li>
        <a href="http://47.95.208.251:8081/niubi/dist/index.html#/blog" target="_blank">NIUBI</a>
    </li>
    
    <li>
        <a href="http://www.znbiscool.icu" target="_blank">宇智波问天</a>
    </li>
    
    <li>
        <a href="https://www.xsyyds.top" target="_blank">醉相生</a>
    </li>
    
    <li>
        <a href="http://60.205.188.140:8888/" target="_blank">那就孤雏</a>
    </li>
    
    <li>
        <a href="https://www.jauxgit.top" target="_blank">jaux署记</a>
    </li>
    
    <li>
        <a href="http://septzhang.link/" target="_blank">SeptZhangの小站</a>
    </li>
    
    <li>
        <a href="http://myblog.zhaixing.work/" target="_blank">星辰驿站</a>
    </li>
    
    <li>
        <a href="https://47.93.242.4:88" target="_blank">宇泽希</a>
    </li>
    
    <li>
        <a href="https://kwydy.gitee.io/" target="_blank">这个爱酱不太聪明</a>
    </li>
    
    <li>
        <a href="https://rivencabin.gitee.io/" target="_blank">Riven的小屋</a>
    </li>
    
    <li>
        <a href="https://rocpenghua.gitee.io/" target="_blank">小鹏驿站</a>
    </li>
    
    <li>
        <a href="https://budongfeng.gitee.io/weekly/" target="_blank">生活富能量</a>
    </li>
    
    <li>
        <a href="https://zygzyg.cloud/" target="_blank">Error&#39;s Blog</a>
    </li>
    
</div>
                
                
                <div class="links tab-pane nav bs-sidenav fade" id="sidebar-links">
    
    <li>
        <a href="https://gitee.com/vampireachao/" target="_blank">Gitee</a>
    </li>
    
</div>
                
            </div>
        </div>
    </aside>
    
</aside>
            </div>
        </div>
    </div>
    <footer id="gal-footer">
    <div class="container">
        Copyright © 2018 阿超 Powered by <a href="https://hexo.io/"
                target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI"
                target="_blank">AONOSORA</a>
    </div>
</footer>

<!-- 回到顶端 -->
<div id="gal-gotop">
    <i class="fa fa-angle-up"></i>
</div>
<style>
    #cursor-circle {
        pointer-events: none;
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 1px solid black;
        background: white;
        mix-blend-mode: exclusion;
        position: absolute;
        z-index: 99999
    }
</style>
<div id="cursor-circle"></div>
<div id="cursor-pointer"></div>
<script type="application/javascript">
    const cursorCircle = document.querySelector("#cursor-circle")
    window.addEventListener('mousemove', e => {
        cursorCircle.style.top = document.documentElement.scrollTop + e.clientY - 11 + 'px'
        cursorCircle.style.left = document.documentElement.scrollLeft + e.clientX - 11 + 'px'
    })
</script>
</body>

<script src="/js/activate-power-mode.js"></script>

<script>

    // 配置highslide
	hs.graphicsDir = '/js/highslide/graphics/'
    hs.outlineType = "rounded-white";
    hs.dimmingOpacity = 0.8;
    hs.outlineWhileAnimating = true;
    hs.showCredits = false;
    hs.captionEval = "this.thumb.alt";
    hs.numberPosition = "caption";
    hs.align = "center";
    hs.transitions = ["expand", "crossfade"];
    hs.lang.number = '共%2张图, 当前是第%1张';
    hs.addSlideshow({
      interval: 5000,
      repeat: true,
      useControls: true,
      fixedControls: "fit",
      overlayOptions: {
        opacity: 0.75,
        position: "bottom center",
        hideOnMouseOut: true
      }
    })

    // 初始化aos
    AOS.init({
      duration: 1000,
      delay: 0,
      easing: 'ease-out-back'
    });

</script>
<script>
	POWERMODE.colorful = 'true';    // make power mode colorful
	POWERMODE.shake = 'true';       // turn off shake
	// TODO 这里根据具体情况修改
	document.body.addEventListener('input', POWERMODE);
</script>
<script>
    window.slideConfig = {
      prefix: '/imgs/slide/background',
      ext: 'jpg',
      maxCount: '6'
    }
</script>

<script src="/js/hs.js"></script>
<script src="/js/blog.js"></script>




</html>